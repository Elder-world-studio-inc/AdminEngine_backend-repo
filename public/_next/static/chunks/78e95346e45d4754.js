(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72133,e=>{"use strict";var t=e.i(43476),s=e.i(932),r=e.i(51884),a=e.i(18566),l=e.i(71645);function i(e){let i,d,n,o=(0,s.c)(16),{children:c,allowedRoles:x,allowedDivision:u}=e,{user:m,isLoading:g}=(0,r.useAuth)(),h=(0,a.useRouter)(),p=(0,a.usePathname)();if(o[0]!==u||o[1]!==x||o[2]!==g||o[3]!==h||o[4]!==m?(i=()=>{if(!g&&m){if(x&&!x.includes(m.role))return void("admin"===m.role?h.push("/command-center"):"division"===m.role&&m.divisionId?h.push(`/divisions/${m.divisionId}`):h.push("/"));if(u&&m.divisionId!==u&&"admin"!==m.role)return void("division"===m.role&&m.divisionId?h.push(`/divisions/${m.divisionId}`):h.push("/command-center"))}},o[0]=u,o[1]=x,o[2]=g,o[3]=h,o[4]=m,o[5]=i):i=o[5],o[6]!==u||o[7]!==x||o[8]!==g||o[9]!==p||o[10]!==h||o[11]!==m?(d=[m,g,x,u,h,p],o[6]=u,o[7]=x,o[8]=g,o[9]=p,o[10]=h,o[11]=m,o[12]=d):d=o[12],(0,l.useEffect)(i,d),g){let e;return o[13]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:"Loading..."}),o[13]=e):e=o[13],e}return!m||x&&!x.includes(m.role)||u&&m.divisionId!==u&&"admin"!==m.role?null:(o[14]!==c?(n=(0,t.jsx)(t.Fragment,{children:c}),o[14]=c,o[15]=n):n=o[15],n)}e.s(["default",()=>i])},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},90214,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(75254);let a=(0,r.default)("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),l=(0,r.default)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]),i=(0,r.default)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),d=(0,r.default)("gamepad-2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]),n=(0,r.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var o=e.i(37727),c=e.i(72133),x=e.i(54858),u=e.i(51884);function m(){let{user:e,isLoading:r}=(0,u.useAuth)(),[m,g]=(0,s.useState)([]),[h,p]=(0,s.useState)(""),[b,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)({title:"",desc:"",priority:"medium"});(0,s.useEffect)(()=>{!r&&e&&v()},[r,e]);let v=async()=>{try{let e=await x.wayfarerApi.getProjects();g(e.data),e.data.length>0&&!h&&p(e.data[0].id)}catch(e){console.error("Failed to fetch projects:",e)}},N=m.find(e=>e.id===h)||m[0],w=async e=>{if(e.preventDefault(),!f.title||!f.desc)return;let t={id:Date.now(),...f};try{await x.wayfarerApi.requestAsset({projectId:h,request:t}),v(),y(!1),j({title:"",desc:"",priority:"medium"})}catch(e){console.error("Failed to add request:",e),alert("Failed to add request")}};return 0===m.length?(0,t.jsx)(c.default,{allowedDivision:"wayfarer",children:(0,t.jsx)("div",{className:"p-8 text-white",children:"Loading projects..."})}):(0,t.jsx)(c.default,{allowedDivision:"wayfarer",children:(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 border-b border-gray-800 pb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Level Design Task Board"}),(0,t.jsx)("p",{className:"text-gray-400 mt-1",children:"World Map Progress & Asset Requests"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white cursor-pointer hover:border-gray-500 transition-colors",children:[(0,t.jsx)(d,{size:18,className:"text-purple-400"}),(0,t.jsx)("span",{className:"font-medium min-w-[140px]",children:N.name}),(0,t.jsx)(n,{size:16,className:"text-gray-400"})]}),(0,t.jsx)("div",{className:"absolute right-0 top-full mt-2 w-64 bg-gray-900 border border-gray-700 rounded-lg shadow-xl overflow-hidden hidden group-hover:block z-50",children:m.map(e=>(0,t.jsxs)("button",{onClick:()=>p(e.id),className:`w-full text-left px-4 py-3 hover:bg-gray-800 transition-colors flex flex-col ${h===e.id?"bg-gray-800 border-l-2 border-purple-500":""}`,children:[(0,t.jsx)("span",{className:"text-white font-medium text-sm",children:e.name}),(0,t.jsx)("span",{className:"text-gray-500 text-xs mt-0.5 truncate",children:e.description})]},e.id))})]}),(0,t.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-medium transition-colors",children:[(0,t.jsx)(i,{size:16}),"New Zone"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 bg-gray-900 border border-gray-800 rounded-xl p-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-900/30 rounded-lg text-blue-400",children:(0,t.jsx)(a,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white",children:"World Map Tracker"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Project: ",(0,t.jsx)("span",{className:"text-blue-400",children:N.name})]})]})]})}),(0,t.jsxs)("div",{className:"aspect-video bg-gray-950 border border-gray-800 rounded-lg relative overflow-hidden group",children:[(0,t.jsx)("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"linear-gradient(#333 1px, transparent 1px), linear-gradient(90deg, #333 1px, transparent 1px)",backgroundSize:"20px 20px"}}),N.zones.map(e=>(0,t.jsx)("div",{className:`absolute w-16 h-16 rounded-full border-4 opacity-80 hover:opacity-100 cursor-pointer transition-all transform hover:scale-110 flex items-center justify-center ${(e=>{switch(e){case"live":return"bg-green-500 border-green-400";case"progress":return"bg-yellow-500 border-yellow-400 animate-pulse";default:return"bg-red-500 border-red-400"}})(e.status)}`,style:{left:`${e.x}%`,top:`${e.y}%`},children:(0,t.jsx)("span",{className:"text-[10px] font-bold text-black bg-white/80 px-1 rounded truncate max-w-full",children:e.name.split("_")[0]})},e.id)),(0,t.jsxs)("div",{className:"absolute bottom-4 right-4 bg-gray-900/90 border border-gray-800 p-3 rounded-lg backdrop-blur-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1 text-xs text-gray-300",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"})," Finalized / Live"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1 text-xs text-gray-300",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"})," In-Progress"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"})," Empty / Draft"]})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"p-2 bg-orange-900/30 rounded-lg text-orange-400",children:(0,t.jsx)(l,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white",children:"Asset Requests"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[N.requests.length," active requests"]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[N.requests.map(e=>(0,t.jsxs)("div",{className:"bg-gray-950 border border-gray-800 rounded-lg p-4 hover:border-gray-700 transition-colors",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("h4",{className:"text-white font-medium text-sm",children:e.title}),(0,t.jsx)("span",{className:`text-[10px] px-2 py-0.5 rounded uppercase font-bold ${"high"===e.priority?"bg-red-900/30 text-red-400":"medium"===e.priority?"bg-yellow-900/30 text-yellow-400":"bg-blue-900/30 text-blue-400"}`,children:e.priority})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-3 leading-relaxed",children:e.desc}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{className:"flex-1 bg-gray-800 hover:bg-gray-700 text-white py-1.5 rounded text-xs transition-colors",children:"View"}),(0,t.jsx)("button",{className:"flex-1 bg-gray-800 hover:bg-gray-700 text-white py-1.5 rounded text-xs transition-colors",children:"Assign"})]})]},e.id)),0===N.requests.length&&(0,t.jsx)("div",{className:"text-center py-8 text-gray-500 text-sm",children:"No pending requests for this project."}),(0,t.jsxs)("button",{onClick:()=>y(!0),className:"w-full py-3 border border-dashed border-gray-700 rounded-lg text-gray-500 hover:text-white hover:border-gray-500 text-sm transition-colors flex items-center justify-center gap-2",children:[(0,t.jsx)(i,{size:16}),"Request New Asset"]})]})]})]}),b&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl w-full max-w-md shadow-2xl",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-white",children:"New Asset Request"}),(0,t.jsx)("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-white transition-colors",children:(0,t.jsx)(o.X,{size:20})})]}),(0,t.jsxs)("form",{onSubmit:w,className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Asset Title"}),(0,t.jsx)("input",{type:"text",value:f.title,onChange:e=>j({...f,title:e.target.value}),placeholder:"e.g., Ancient Stone Pillar",className:"w-full bg-gray-950 border border-gray-800 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500 text-sm",autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Description"}),(0,t.jsx)("textarea",{value:f.desc,onChange:e=>j({...f,desc:e.target.value}),placeholder:"Describe the asset requirements, style, and usage...",rows:4,className:"w-full bg-gray-950 border border-gray-800 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500 text-sm resize-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Priority"}),(0,t.jsx)("div",{className:"flex gap-2",children:["low","medium","high"].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>j({...f,priority:e}),className:`flex-1 py-2 rounded-lg text-xs font-medium capitalize border transition-colors ${f.priority===e?"high"===e?"bg-red-900/30 border-red-500 text-red-400":"medium"===e?"bg-yellow-900/30 border-yellow-500 text-yellow-400":"bg-blue-900/30 border-blue-500 text-blue-400":"bg-gray-950 border-gray-800 text-gray-500 hover:border-gray-700"}`,children:e},e))})]}),(0,t.jsxs)("div",{className:"pt-4 flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>y(!1),className:"flex-1 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Create Request"})]})]})]})})]})})}e.s(["default",()=>m],90214)}]);