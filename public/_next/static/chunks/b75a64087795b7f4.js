(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72133,e=>{"use strict";var t=e.i(43476),a=e.i(932),s=e.i(51884),r=e.i(18566),i=e.i(71645);function l(e){let l,n,d,o=(0,a.c)(16),{children:c,allowedRoles:x,allowedDivision:u}=e,{user:g,isLoading:p}=(0,s.useAuth)(),h=(0,r.useRouter)(),m=(0,r.usePathname)();if(o[0]!==u||o[1]!==x||o[2]!==p||o[3]!==h||o[4]!==g?(l=()=>{if(!p&&g){if(x&&!x.includes(g.role))return void("admin"===g.role?h.push("/command-center"):"division"===g.role&&g.divisionId?h.push(`/divisions/${g.divisionId}`):h.push("/"));if(u&&g.divisionId!==u&&"admin"!==g.role)return void("division"===g.role&&g.divisionId?h.push(`/divisions/${g.divisionId}`):h.push("/command-center"))}},o[0]=u,o[1]=x,o[2]=p,o[3]=h,o[4]=g,o[5]=l):l=o[5],o[6]!==u||o[7]!==x||o[8]!==p||o[9]!==m||o[10]!==h||o[11]!==g?(n=[g,p,x,u,h,m],o[6]=u,o[7]=x,o[8]=p,o[9]=m,o[10]=h,o[11]=g,o[12]=n):n=o[12],(0,i.useEffect)(l,n),p){let e;return o[13]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:"Loading..."}),o[13]=e):e=o[13],e}return!g||x&&!x.includes(g.role)||u&&g.divisionId!==u&&"admin"!==g.role?null:(o[14]!==c?(d=(0,t.jsx)(t.Fragment,{children:c}),o[14]=c,o[15]=d):d=o[15],d)}e.s(["default",()=>l])},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},78894,e=>{"use strict";let t=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},68350,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(72664),r=e.i(75254);let i=(0,r.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var l=e.i(78894),n=e.i(43531);let d=(0,r.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var o=e.i(78583),c=e.i(72133),x=e.i(54858),u=e.i(37727);let g=(0,r.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),p=(0,r.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var h=e.i(69638),m=e.i(63209),y=e.i(51884);function b({isOpen:e,onClose:s,onSuccess:r,asset:i}){let{user:l}=(0,y.useAuth)(),[n,d]=(0,a.useState)(!1),[o,c]=(0,a.useState)({ipStatus:"Work_for_Hire",contentMetadata:{title:"",genre:"",type:"3D_Model"},financialTag:{shardPrice:0,releaseDate:""}});if((0,a.useEffect)(()=>{i?c(i):c({ipStatus:"Work_for_Hire",contentMetadata:{title:"",genre:"",type:"3D_Model"},financialTag:{shardPrice:0,releaseDate:""}})},[i,e]),!e)return null;let b=(e,t,a)=>{"root"===e?c(e=>({...e,[t]:a})):"contentMetadata"===e?c(e=>({...e,contentMetadata:{...e.contentMetadata,[t]:a}})):"financialTag"===e&&c(e=>({...e,financialTag:{...e.financialTag,[t]:a}}))},f=async e=>{e.preventDefault(),d(!0);try{i&&i.assetId?await x.assetApi.update(i.assetId,o):await x.assetApi.create({...o,creatorId:l?.id||"unknown"}),r(),s()}catch(e){console.error("Error saving asset:",e),alert("Failed to save asset.")}finally{d(!1)}},j=async e=>{if(i?.assetId){d(!0);try{await x.assetApi.updateStatus(i.assetId,e,l?.role||"division"),r(),s()}catch(e){console.error("Error updating status:",e),alert(e.response?.data?.message||"Failed to update status")}finally{d(!1)}}},v=i?.status==="SIGNED"&&l?.role!=="admin";return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:(0,t.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-800 bg-gray-900/50 sticky top-0 backdrop-blur-md",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:i?"Edit Asset Packet":"New Asset Packet"}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:i?.assetId?`ID: ${i.assetId}`:"Generates ID upon creation"})]}),(0,t.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-white",children:(0,t.jsx)(u.X,{size:24})})]}),(0,t.jsxs)("form",{onSubmit:f,className:"p-6 space-y-6",children:[i&&(0,t.jsxs)("div",{className:"flex items-center justify-between bg-gray-950 p-4 rounded-lg border border-gray-800",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`w-3 h-3 rounded-full ${"SIGNED"===i.status?"bg-green-500":"IN-REVIEW"===i.status?"bg-yellow-500":"bg-gray-500"}`}),(0,t.jsx)("span",{className:"font-mono text-sm font-bold text-white",children:i.status})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:["DRAFT"===i.status&&(0,t.jsxs)("button",{type:"button",onClick:()=>j("IN-REVIEW"),className:"flex items-center gap-2 px-3 py-1.5 bg-yellow-500/10 text-yellow-400 border border-yellow-500/20 rounded hover:bg-yellow-500/20 text-xs font-medium transition-colors",children:[(0,t.jsx)(p,{size:14}),"Submit for Review"]}),"IN-REVIEW"===i.status&&l?.role==="admin"&&(0,t.jsxs)("button",{type:"button",onClick:()=>j("SIGNED"),className:"flex items-center gap-2 px-3 py-1.5 bg-green-500/10 text-green-400 border border-green-500/20 rounded hover:bg-green-500/20 text-xs font-medium transition-colors",children:[(0,t.jsx)(h.CheckCircle,{size:14}),"Sign & Approve"]}),"IN-REVIEW"===i.status&&l?.role==="admin"&&(0,t.jsxs)("button",{type:"button",onClick:()=>j("DRAFT"),className:"flex items-center gap-2 px-3 py-1.5 bg-red-500/10 text-red-400 border border-red-500/20 rounded hover:bg-red-500/20 text-xs font-medium transition-colors",children:[(0,t.jsx)(m.AlertCircle,{size:14}),"Reject"]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",children:"Content Metadata"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Title"}),(0,t.jsx)("input",{type:"text",value:o.contentMetadata?.title,onChange:e=>b("contentMetadata","title",e.target.value),disabled:v,className:"w-full bg-gray-950 border border-gray-800 rounded px-3 py-2 text-white focus:border-orange-500 focus:outline-none",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Genre"}),(0,t.jsx)("input",{type:"text",value:o.contentMetadata?.genre,onChange:e=>b("contentMetadata","genre",e.target.value),disabled:v,className:"w-full bg-gray-950 border border-gray-800 rounded px-3 py-2 text-white focus:border-orange-500 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Type"}),(0,t.jsxs)("select",{value:o.contentMetadata?.type,onChange:e=>b("contentMetadata","type",e.target.value),disabled:v,className:"w-full bg-gray-950 border border-gray-800 rounded px-3 py-2 text-white focus:border-orange-500 focus:outline-none",children:[(l?.divisionId==="creative"||l?.role==="admin")&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("option",{value:"Book",children:"Book"}),(0,t.jsx)("option",{value:"Comic",children:"Comic"}),(0,t.jsx)("option",{value:"Script",children:"Script"})]}),(l?.divisionId==="wayfarer"||l?.role==="admin")&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("option",{value:"3D_Model",children:"3D Model"}),(0,t.jsx)("option",{value:"Environment",children:"Environment"})]}),!l?.divisionId&&l?.role!=="admin"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("option",{value:"Book",children:"Book"}),(0,t.jsx)("option",{value:"Comic",children:"Comic"}),(0,t.jsx)("option",{value:"Script",children:"Script"}),(0,t.jsx)("option",{value:"3D_Model",children:"3D Model"}),(0,t.jsx)("option",{value:"Environment",children:"Environment"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-800",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",children:"Financial Tag"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[!["3D_Model","Environment"].includes(o.contentMetadata?.type||"")&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Shard Price"}),(0,t.jsx)("input",{type:"number",value:o.financialTag?.shardPrice,onChange:e=>b("financialTag","shardPrice",Number(e.target.value)),disabled:v,className:"w-full bg-gray-950 border border-gray-800 rounded px-3 py-2 text-white focus:border-orange-500 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Release Date"}),(0,t.jsx)("input",{type:"date",value:o.financialTag?.releaseDate,onChange:e=>b("financialTag","releaseDate",e.target.value),disabled:v,className:"w-full bg-gray-950 border border-gray-800 rounded px-3 py-2 text-white focus:border-orange-500 focus:outline-none"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-800",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",children:"Legal & IP"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"IP Status"}),(0,t.jsxs)("select",{value:o.ipStatus,onChange:e=>b("root","ipStatus",e.target.value),disabled:v,className:"w-full bg-gray-950 border border-gray-800 rounded px-3 py-2 text-white focus:border-orange-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"Work_for_Hire",children:"Work for Hire (Standard)"}),(0,t.jsx)("option",{value:"Siron_Royalty_18",children:"Siron Royalty 18 (Special)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Legal Signature"}),(0,t.jsx)("div",{className:"w-full bg-gray-950/50 border border-gray-800 rounded px-3 py-2 text-gray-400 text-sm",children:i?.legalSignatureStatus==="NULL"?"Not Signed":i?.legalSignatureStatus||"Not Signed"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-800",children:[(0,t.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),!v&&(0,t.jsxs)("button",{type:"submit",disabled:n,className:"flex items-center gap-2 px-6 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:[(0,t.jsx)(g,{size:16}),n?"Saving...":"Save Asset"]})]})]})]})})}function f(){let{user:e,isLoading:r}=(0,y.useAuth)(),[u,g]=(0,a.useState)([]),[p,h]=(0,a.useState)(!0),[m,f]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null),N=async()=>{h(!0);try{let e=await x.assetApi.getAll({divisionId:"wayfarer"});g(e.data)}catch(e){console.error("Failed to fetch assets",e)}finally{h(!1)}};return(0,a.useEffect)(()=>{!r&&e&&N()},[r,e]),(0,t.jsx)(c.default,{allowedDivision:"wayfarer",children:(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center border-b border-gray-800 pb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Omnivael Asset Vault"}),(0,t.jsx)("p",{className:"text-gray-400 mt-1",children:"Centralized Asset Management & Legal Repository"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:16}),(0,t.jsx)("input",{type:"text",placeholder:"Search assets...",className:"pl-9 pr-4 py-2 bg-gray-900 border border-gray-800 rounded-lg text-sm text-white focus:outline-none focus:border-orange-500"})]}),(0,t.jsxs)("button",{onClick:()=>{v(null),f(!0)},className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg text-sm font-medium transition-colors",children:[(0,t.jsx)(d,{size:16}),"New Asset"]})]})]}),p?(0,t.jsx)("div",{className:"text-gray-400",children:"Loading assets..."}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:u.map(e=>(0,t.jsxs)("div",{onClick:()=>{v(e),f(!0)},className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden group hover:border-orange-500/50 transition-colors cursor-pointer",children:[(0,t.jsxs)("div",{className:"h-48 bg-gray-950 flex items-center justify-center relative",children:[(0,t.jsx)(s.Box,{size:48,className:"text-gray-800"}),(0,t.jsx)("div",{className:"absolute top-3 right-3 px-2 py-1 bg-black/50 backdrop-blur rounded text-xs text-white font-medium",children:e.contentMetadata.type}),(0,t.jsx)("div",{className:"absolute bottom-3 left-3 px-2 py-1 bg-black/50 backdrop-blur rounded text-xs text-gray-300 font-mono",children:e.assetId})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"text-white font-medium truncate mb-1",children:e.contentMetadata.title}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-4",children:[(0,t.jsx)("span",{children:e.contentMetadata.genre}),(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsxs)("span",{children:["Creator: ",e.creatorId]})]}),(0,t.jsx)("div",{className:"space-y-2 mb-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Status"}),(0,t.jsxs)("span",{className:`flex items-center gap-1 ${(e=>{switch(e){case"SIGNED":return"text-green-400";case"IN-REVIEW":return"text-yellow-400";default:return"text-gray-400"}})(e.status)} font-medium`,children:[(e=>{switch(e){case"SIGNED":return(0,t.jsx)(n.Check,{size:14});case"IN-REVIEW":return(0,t.jsx)(l.AlertTriangle,{size:14});default:return(0,t.jsx)(o.FileText,{size:14})}})(e.status),(0,t.jsx)("span",{className:"capitalize",children:e.status})]})]})}),(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-800 flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"IP Rights"}),(0,t.jsx)("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${"Siron_Royalty_18"===e.ipStatus?"bg-purple-900/30 text-purple-400 border border-purple-800":"bg-gray-800 text-gray-400"}`,children:"Siron_Royalty_18"===e.ipStatus?"Siron Royalty":"Work for Hire"})]})]})]},e.assetId))}),(0,t.jsx)(b,{isOpen:m,onClose:()=>f(!1),onSuccess:()=>{N()},asset:j})]})})}e.s(["default",()=>f],68350)}]);